!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),importScripts("js/three.min.js","js/perlin.js");const n=self,o=4.3,s=5,i=4,u=25,a=u-(i+(u-i)/4),l=64,f=64;function p(e,t){let r=25*noise.simplex2(e/100,t/100)+25+1.5*noise.simplex2(e/8,t/8)+30*noise.simplex2(e/1200,t/1200)+5,n=i+(r-i)/4;return r>u?Math.pow(n,1.4)-13.5:n}function c(e,t,r){if(r<o)return 0;if(r<s+.5)return 1;if(r<s+1)return 1+2*(r-(s+.5));let n=3+3*noise.simplex2(e/20,t/20);if(r>u+3+n)return 4;if(r>u+2+n)return r-(u+2+n)+3;let i=5+5*noise.simplex2(e/15,t/15);return r>a+i?3:r>a+i-1?r-(a+i-1)+2:2}noise.seed(1024),n.addEventListener("message",(function(e){switch(e.data[0]){case"land":n.postMessage(function(e,t){let r,n,o,s=new Float32Array((l+1)*(f+1)*3),i=l+1,u=f+1,a=new Float32Array((l+1)*(f+1));for(let d=0;d<i;d++)for(let i=0;i<u;i++)r=d-l/2+e,n=i-f/2+t,s[3*(d*u+i)]=r,s[3*(d*u+i)+2]=n,o=p(r,n),s[3*(d*u+i)+1]=o,a[d*u+i]=c(r,n,o);return["land",e,t,s,a]}(e.data[1],e.data[2]));break;case"grass":n.postMessage(function(e,t,r){let n,o,i,u=new THREE.Matrix4,a=new THREE.Vector3,l=new THREE.Euler,f=new THREE.Quaternion,c=new THREE.Vector3(1,1,1),d=[],m=[],y=0;for(let x=0;x<r;x++)for(let E=0;E<r&&!(y>2e3);E++)n=x-r/2+e,o=E-r/2+t,i=p(n,o),i>s+1&&i<s+8&&noise.simplex2(n/5,o/5)>.5&&(c.set(1,1,1),a.x=n,a.z=o,a.y=i+.25,l.y=noise.simplex2(n,o)*Math.PI*2,f.setFromEuler(l),u.compose(a,f,c),u.toArray().forEach(e=>{m.push(e)}),d.push(noise.simplex2(n,o)),y++);for(let x=0;x<2*r;x++)for(let E=0;E<2*r&&!(y>2e3);E++)n=x-r+e,o=E-r+t,i=p(n,o),i>s+1&&i<s+8&&noise.simplex2(n/7,o/7)*noise.simplex2(n/1,o/1)>.8&&(c.set(10,10,10),a.x=n,a.z=o,a.y=i+2,l.y=noise.simplex2(n/5,o/5)*Math.PI,f.setFromEuler(l),u.compose(a,f,c),u.toArray().forEach(e=>{m.push(e)}),l.y+=.5*Math.PI,f.setFromEuler(l),u.compose(a,f,c),u.toArray().forEach(e=>{m.push(e)}),d.push(10),d.push(10),y+=2);return["grass",m,d]}(e.data[1],e.data[2],e.data[3]))}})),t.default={}}]);
//# sourceMappingURL=worker.js.map